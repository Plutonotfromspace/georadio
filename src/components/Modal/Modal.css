/* ============================================
   BASE MODAL STYLES
   Consolidated modal styles with design tokens
   ============================================ */

/* Design tokens for modal system */
:root {
  /* Spacing scale (8px base) */
  --modal-space-xs: 4px;
  --modal-space-sm: 8px;
  --modal-space-md: 16px;
  --modal-space-lg: 24px;
  --modal-space-xl: 32px;
  --modal-space-2xl: 48px;

  /* Border radius */
  --modal-radius-sm: 4px;
  --modal-radius-md: 8px;
  --modal-radius-lg: 16px;
  --modal-radius-full: 9999px;

  /* Shadows (3-tier system) */
  --modal-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --modal-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
  --modal-shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.2);

  /* Animation durations */
  --modal-duration-micro: 150ms;
  --modal-duration-standard: 300ms;
  --modal-duration-emphasis: 500ms;

  /* Animation easings */
  --modal-ease-out: cubic-bezier(0.0, 0.0, 0.2, 1);
  --modal-ease-in: cubic-bezier(0.4, 0.0, 1, 1);
  --modal-ease-in-out: cubic-bezier(0.4, 0.0, 0.2, 1);

  /* Modal-specific */
  --modal-backdrop: rgba(0, 0, 0, 0.6);
  --modal-bg: rgba(255, 255, 255, 0.98);
  --modal-blur: 8px;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  :root {
    --modal-duration-micro: 0ms;
    --modal-duration-standard: 0ms;
    --modal-duration-emphasis: 0ms;
  }
}

/* ============================================
   MODAL OVERLAY (Backdrop) - Using unique class name to avoid conflicts
   ============================================ */

.base-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--modal-backdrop);
  backdrop-filter: blur(var(--modal-blur));
  -webkit-backdrop-filter: blur(var(--modal-blur));
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--modal-space-md);
  
  /* Animation */
  animation: base-modal-overlay-enter var(--modal-duration-standard) var(--modal-ease-out);
}

.base-modal-overlay--closing {
  animation: base-modal-overlay-exit var(--modal-duration-micro) var(--modal-ease-in) forwards;
}

@keyframes base-modal-overlay-enter {
  from {
    opacity: 0;
    backdrop-filter: blur(0);
    -webkit-backdrop-filter: blur(0);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(var(--modal-blur));
    -webkit-backdrop-filter: blur(var(--modal-blur));
  }
}

@keyframes base-modal-overlay-exit {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* ============================================
   MODAL CONTAINER - Using unique class name
   ============================================ */

.base-modal {
  background: var(--modal-bg);
  border-radius: var(--modal-radius-lg);
  box-shadow: var(--modal-shadow-lg);
  max-height: 90vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  position: relative;
  /* Ensure modal only takes content height, not full available height */
  height: auto;
  text-align: center;
  
  /* Animation */
  animation: base-modal-enter var(--modal-duration-standard) var(--modal-ease-out);
}

.base-modal--closing {
  animation: base-modal-exit var(--modal-duration-micro) var(--modal-ease-in) forwards;
}

@keyframes base-modal-enter {
  from {
    opacity: 0;
    transform: translateY(var(--modal-space-md)) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes base-modal-exit {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(var(--modal-space-md)) scale(0.98);
  }
}

/* ============================================
   MODAL SIZES
   ============================================ */

.base-modal--sm {
  width: 90%;
  max-width: 340px;
  padding: 32px 24px;
}

.base-modal--md {
  width: 90%;
  max-width: 400px;
  padding: var(--modal-space-xl);
}

.base-modal--lg {
  width: 90%;
  max-width: 560px;
  padding: var(--modal-space-xl);
}

/* ============================================
   MODAL TITLE
   ============================================ */

.base-modal__title {
  font-family: 'CustomHeader', 'Audiowide', sans-serif;
  font-size: 1.5rem;
  font-weight: 700;
  color: #1e293b;
  margin: 0 0 var(--modal-space-md) 0;
  text-align: center;
}

/* ============================================
   SCREEN READER ONLY
   ============================================ */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ============================================
   MOBILE RESPONSIVE
   ============================================ */

@media screen and (max-width: 480px) {
  .base-modal--sm,
  .base-modal--md,
  .base-modal--lg {
    max-width: 95%;
    padding: var(--modal-space-lg);
  }
  
  .base-modal__title {
    font-size: 1.25rem;
  }
}

/* ============================================
   FOCUS STYLES
   ============================================ */

.base-modal button:focus-visible,
.base-modal a:focus-visible,
.base-modal input:focus-visible,
.base-modal [tabindex]:focus-visible {
  outline: 3px solid var(--primary-color, #00d0ff);
  outline-offset: 2px;
}
